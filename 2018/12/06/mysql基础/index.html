<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'UJCQ3PDF0F',
      apiKey: 'a3d4ab7cd60617bd0d524169bb08d56d',
      indexName: 'dev_ayanamiq',
      hits: {"per_page":10},
      labels: {"input_placeholder":"输入关键字","hits_empty":"没有找到关于 ${query} 的文章","hits_stats":"${hits} 相关记录，共耗时 ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="增删改查12345插入(增)：insert into 表名字(列名1，列名2...) values(值1，值2...)或者：insert into 表名字 values(值1，值2...)若不指定列名，则需要插入全部字段。 123删除：delete from 表名字 where id = 1若不加where条件，则删除数据表中所有数据 123修改：update 表名字 set 列1=值1，列2=值">
<meta name="keywords" content="mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql基础">
<meta property="og:url" content="http://ayanamiq.github.io/2018/12/06/mysql基础/index.html">
<meta property="og:site_name" content="王靖尧的博客">
<meta property="og:description" content="增删改查12345插入(增)：insert into 表名字(列名1，列名2...) values(值1，值2...)或者：insert into 表名字 values(值1，值2...)若不指定列名，则需要插入全部字段。 123删除：delete from 表名字 where id = 1若不加where条件，则删除数据表中所有数据 123修改：update 表名字 set 列1=值1，列2=值">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-05-09T02:45:19.702Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysql基础">
<meta name="twitter:description" content="增删改查12345插入(增)：insert into 表名字(列名1，列名2...) values(值1，值2...)或者：insert into 表名字 values(值1，值2...)若不指定列名，则需要插入全部字段。 123删除：delete from 表名字 where id = 1若不加where条件，则删除数据表中所有数据 123修改：update 表名字 set 列1=值1，列2=值">





  
  
  <link rel="canonical" href="http://ayanamiq.github.io/2018/12/06/mysql基础/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>mysql基础 | 王靖尧的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王靖尧的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://ayanamiq.github.io/2018/12/06/mysql基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王靖尧">
      <meta itemprop="description" content="一晃而过的时间，都做了些什么">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王靖尧的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">mysql基础

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-06 18:12:58" itemprop="dateCreated datePublished" datetime="2018-12-06T18:12:58+08:00">2018-12-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-09 10:45:19" itemprop="dateModified" datetime="2019-05-09T10:45:19+08:00">2019-05-09</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2018/12/06/mysql基础/" class="leancloud_visitors" data-flag-title="mysql基础">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">插入(增)：</span><br><span class="line">insert into 表名字(列名1，列名2...) values(值1，值2...)</span><br><span class="line">或者：</span><br><span class="line">insert into 表名字 values(值1，值2...)</span><br><span class="line">若不指定列名，则需要插入全部字段。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">删除：</span><br><span class="line">delete from 表名字 where id = 1</span><br><span class="line">若不加where条件，则删除数据表中所有数据</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">修改：</span><br><span class="line">update 表名字 set 列1=值1，列2=值2... where id = 1</span><br><span class="line">若不加where条件，则更新数据表中所有数据</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询：</span><br><span class="line">select * from 表名字</span><br><span class="line">星号代表查询数据表中所有字段</span><br><span class="line">select id,stu_name,age, from 表名字</span><br><span class="line">查询多个字段，用逗号进行分割</span><br></pre></td></tr></table></figure>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>主要包括以下五大类：<br>整数类型：BIT、BOOL、TINY INT、SMALL INT、MEDIUM INT、 INT、 BIG INT<br>浮点数类型：FLOAT、DOUBLE、DECIMAL<br>字符串类型：CHAR、VARCHAR、TINY TEXT、TEXT、MEDIUM TEXT、LONGTEXT、TINY BLOB、BLOB、MEDIUM BLOB、LONG BLOB<br>日期类型：Date、DateTime、TimeStamp、Time、Year<br>其他数据类型：BINARY、VARBINARY、ENUM、SET、Geometry、Point、MultiPoint、LineString、MultiLineString、Polygon、GeometryCollection等</p>
<h1 id="库相关"><a href="#库相关" class="headerlink" title="库相关"></a>库相关</h1><ul>
<li>创建数据库:<br><code>create database[if not exists] db_name</code></li>
<li>删除数据库:<br><code>drop database[if exists] db_name</code></li>
<li>查看当前所有数据库<br><code>show databases</code></li>
</ul>
<p>注：需要将<code>if exists</code>旁边的括号去掉，中括号表示可选参数。<br><code>if not exists</code>：如果不存在<br><code>if exists</code>：如果存在<br>加入这个参数可以避免sql报错。</p>
<h1 id="表相关"><a href="#表相关" class="headerlink" title="表相关"></a>表相关</h1><ul>
<li>创建数据表:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table[if not exists] table_name(</span><br><span class="line">    列名 类型 是否为空</span><br><span class="line">    列名 类型 是否为空</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>字段参数说明：<br><code>id int(11) NOT NULL AUTO_INCREMENT</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id：字段名称</span><br><span class="line">int(11)：字段类型及长度</span><br><span class="line">NOT NULL：是否可为空，可为空则为null</span><br><span class="line">AUTO_INCREMENT：自动递增，一般此属性只应用在主键上</span><br><span class="line">COMMENT：字段说明</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>删除表<br><code>DROP TABLE [if exists] table_name</code></p>
</li>
<li><p>显示表的数据结构<br><code>desc table_name</code></p>
</li>
<li><p>查看数据库中所有的表<br><code>show tables</code></p>
</li>
<li><p>修改数据表</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE &lt;表名&gt;</span><br><span class="line">[ALTER COLUMN &lt;列名&gt; &lt;新数据类型&gt;]</span><br><span class="line">|[ADD &lt;列名&gt; &lt;数据类型&gt; [属性]</span><br><span class="line">|[DROP COLUMN &lt;列名&gt;]</span><br><span class="line">|[ADD [constraint] [约束名] 约束定义</span><br><span class="line">|[DROP [constraint] 约束名]</span><br></pre></td></tr></table></figure>
<ul>
<li><p>新增字段<br><code>alter table table_name add column_name varchar(200) not null default 0 COMMENT &quot;描述&quot;;</code></p>
</li>
<li><p>修改字段<br><code>ALTER TABLE table_name MODIFY column_name VARCHAR(200) NULL DEFAULT null COMMENT &#39;这是字段描述&#39;;</code></p>
</li>
<li><p>删除列<br><code>ALTER TABLE 表名 DROP 列名</code></p>
</li>
<li><p>复制表<br>结构、数据都复制：<br><code>CREATE TABLE 新表名 SELECT * FROM 旧表名</code><br>仅结构<br><code>CREATE TABLE 新表名 LIKE 旧表名</code></p>
</li>
<li><p>A表数据导入B表：<br><code>INSERT INTO 表名 SELECT * FROM 有数据的表</code></p>
</li>
</ul>
<h1 id="主外键"><a href="#主外键" class="headerlink" title="主外键"></a>主外键</h1><p>主键：<code>primary_key</code></p>
<ul>
<li>保证数据唯一性</li>
<li>一个数据表只能有一个主键</li>
<li>主键不可以为空，并且不可以重复</li>
</ul>
<p>外键：<code>foreign key</code></p>
<ul>
<li>保证数据的完整性，一致性</li>
<li>外键列和参照列的数据类型必须一致</li>
<li>参照列的表为父表，外键列的表为子表</li>
<li>实现一对多，多对一的关系</li>
<li>外键列和参照列必须创建索引，如不创建，mySQL会自动创建<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table test(</span><br><span class="line">	id int primary_key auto_increment,</span><br><span class="line">	foreign key(test1_id) references  test2(id)</span><br><span class="line">	//外键列为test1_id(当前表的列),参照了test2表的id列</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>尽量不要使用外键，我们一般人为的人为表与表之间是相关联的。如：<br>班级表class为主表，在学生表student中加入class_id字段，表示班级id，这样就人为的认为student为class的字表，两张表就关联起来了。<br>使用外键在删除表或修改表结构时，会造成很大麻烦。</p>
<h1 id="where条件"><a href="#where条件" class="headerlink" title="where条件"></a>where条件</h1><ul>
<li>可以跟在<code>select、update、delete</code>后</li>
<li>多个where条件，并且的关系，用and链接，或者的关系，用or链接</li>
<li><code>group by</code>：把查询结构进行分组，分组结果可以升序(asc)或降序(desc)，默认升序，用于去重</li>
<li><code>having</code>：如果要将group by的结果进行删选，需要用到having关键字，不可以用where</li>
<li><code>order by</code>：把查询结果进行排序，可升(asc)可降(desc),默认升序，可以进行多次排序，用逗号分割排序字段，越靠前，优先级越高</li>
<li><code>limit</code>：限制查询返回的结果(用于分页功能)是select语句的最后一个关键字<br>  参数1：从第几条结果开始获取<br>  参数2：获取几条结果</li>
</ul>
<p>select语句结构：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> table_name</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">	 gruop <span class="keyword">by</span></span><br><span class="line">	  <span class="keyword">having</span></span><br><span class="line">	   <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">	    <span class="keyword">limit</span></span><br></pre></td></tr></table></figure></p>
<p>关键字顺序不可以颠倒</p>
<h2 id="where条件参数介绍"><a href="#where条件参数介绍" class="headerlink" title="where条件参数介绍"></a>where条件参数介绍</h2><p>以下参数必须跟在where关键字后面，作为where的修饰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">=：相等</span><br><span class="line">&gt;(=)：大于(等于)</span><br><span class="line">&lt;(=)：小于(等于)</span><br><span class="line">is [not] null：为null(不为null)</span><br><span class="line">[not] like：模糊查询</span><br><span class="line">[not] between ... and ..：(不包含)包含在范围内</span><br><span class="line">[not] in：包含在指定范围值内</span><br></pre></td></tr></table></figure></p>
<h2 id="null"><a href="#null" class="headerlink" title="null"></a>null</h2><p>使用NULL条件检索时不能使用=号，必须使用is<br><code>is null</code>，不能是<code>= null</code></p>
<h2 id="like-模糊查询"><a href="#like-模糊查询" class="headerlink" title="like(模糊查询)"></a>like(模糊查询)</h2><p><code>select * from student where stu_name like &#39;%小%&#39;;</code><br><code>%</code>表示可随意替换<br><code>小%</code>表示必须以小开头，后边随意<br><code>%小</code>表示必须以小结尾，前边随意<br><code>%小%</code>表示前后都随意，中间包含小</p>
<h2 id="not-between-…-and-…"><a href="#not-between-…-and-…" class="headerlink" title="[not]between … and …"></a>[not]between … and …</h2><p>范围获取值：<br><code>select * from user where id between 1 and 15 ;</code><br>属于where关键字，可用大于号和小于号来实现相同的功能</p>
<h2 id="not-in"><a href="#not-in" class="headerlink" title="[not]in"></a>[not]in</h2><p>判断一个字段的值是否与括号内的值相同，括号内是or的关系，即满足任何一个条件，都会显示出来<br><code>select * from user where id in(1,2,3) ;</code></p>
<h1 id="多条件组合AND-和-OR-操作符"><a href="#多条件组合AND-和-OR-操作符" class="headerlink" title="多条件组合AND 和 OR 操作符"></a>多条件组合AND 和 OR 操作符</h1><p>查询中使用多个条件组合时，可以使用<code>and</code>或者<code>or</code><br>and：且(必须全部满足)<br>or：或(只需满足一个)</p>
<h1 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h1><p> 以下字符函数都必须跟在<code>select</code>语句后面<br><code>concat(str1,str2,...)</code>：拼接字符串<br><code>length(str)</code>：字符串长度<br><code>lower(str)</code>：字符串转小写<br><code>upper(str)</code>：字符串转大写<br><code>trim(str)</code>：去除字符串前后的空格<br><code>right(str,1)</code>：右侧开始截取，参数2位截取几位<br><code>left(str,1)</code>：左侧开始截取字符串，参数2为截取几位<br><code>replace(参数1，参数2，参数3):</code>：1.要处理的字符串2.要替换的字符3.替换成什么<br><code>substring(参数1，参数2，参数3)</code>：1.要截取的字符串2.从第几位开始截取3.截取的长度</p>
<p>问题：<br>已知一个数字字段，内容不规律，最长有10位，最短有4位，<br>想把不够10位的全部在前边用0补齐，怎么办?</p>
<p>SQL：<br><code>update 表名字 set num = right(concat(&#39;000000&#39;,num),10);</code><br>解：因为最短有4位，在每个字符串左侧都拼接6个0，然后从右侧开始截取10个字符</p>
<h1 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h1><p>聚合函数必须跟在<code>select</code>语句后面<br>一列的和：<code>select sum(列名) from 表名 where ...条件</code><br>一列的最大值：<code>select max(列名) from 表名 where ...条件</code><br>一列的最小值：<code>select min(列名) from 表名 where ...条件</code><br>一列的数量：<code>select count(列名/一般都用id) from 表名 where ...条件</code><br>一列的平均值：<code>select avg(列名) from 表名 where ...条件</code></p>
<h1 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h1><p><code>ceil()</code>：向上取整<br><code>floor()</code>：向下取整<br><code>round()</code>：四舍五入<br><code>power()</code>：幂运算</p>
<h1 id="日期时间函数"><a href="#日期时间函数" class="headerlink" title="日期时间函数"></a>日期时间函数</h1><p><code>now()</code>：当前时间(年月日-时分秒)<br><code>curdate()</code>：当前日期(年月日)<br><code>curtime()</code>：当前时间(时分秒)</p>
<p><code>date_add()</code>：日期加减算法<br>参数1：要进行运算的日期<br>参数2：加或减的量<br>参数3：加或减的日期单位(小时，天，周，月，年)</p>
<p><code>datediff()</code>：日期差值计算<br>参数1：日期类型<br>参数2：日期类型</p>
<p><code>date_format()</code>：日期格式化<br>将指定日期，安装指定规则进行格式化(具体请百度该函数)<br><code>date_format(&#39;2017-1-1&#39;,&#39;%y/%m/%d/&#39;)---&gt;2017/1/1</code><br>注：该函数会导致索引失效</p>
<h1 id="case-when"><a href="#case-when" class="headerlink" title="case when"></a>case when</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select case(</span><br><span class="line">	when sex=&apos;0&apos; then &apos;女&apos;</span><br><span class="line">	when sex=&apos;1&apos; then &apos;男&apos;</span><br><span class="line">	end</span><br><span class="line">)</span><br><span class="line">from 表名</span><br></pre></td></tr></table></figure>
<p><code>case when</code>用于查询时替换表中数据，如性别字段，里面有0和1，查询时可分别把0和1替换成女和男</p>
<h1 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h1><p>需要注意：</p>
<ul>
<li>查询结果在哪个表</li>
<li>链接哪个表</li>
<li>链接条件</li>
<li>where条件</li>
</ul>
<h2 id="表连接类型"><a href="#表连接类型" class="headerlink" title="表连接类型"></a>表连接类型</h2><ul>
<li><code>cross join</code>：交叉连接</li>
<li><code>inner join</code>：内连接</li>
<li>外链接分为两种：<br>  <code>left join</code>：左外连接<br>  <code>right join</code>：右外链接</li>
<li><code>union 和 union all</code>：联合查询</li>
<li><code>full join</code>：全连接</li>
</ul>
<p>示例表1：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t1 (</span><br><span class="line">  t1_id <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  t1_str <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">0</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure></p>
<p>填充数据<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test.t1(t1_id, t1_str) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test.t1(t1_id, t1_str) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test.t1(t1_id, t1_str) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">'3'</span>);</span><br></pre></td></tr></table></figure></p>
<p>示例表2：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t2 (</span><br><span class="line">  t2_id <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  t2_str <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">0</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure></p>
<p>填充数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test.t2(id,t2_str) VALUES (2, &apos;a&apos;);</span><br><span class="line">INSERT INTO test.t2(id,t2_str) VALUES (3, &apos;b&apos;);</span><br></pre></td></tr></table></figure></p>
<h2 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h2><p>语法：<br><code>select * from t1 cross join t2;</code><br>在mysql中，上述查询语句查询出的结果与如下语句相同:<br><code>select * from t1,t2;</code><br>上述查询的结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">t1_id	t1_str	t2_id	t2_str</span><br><span class="line">1	1	2	a</span><br><span class="line">1	1	3	b</span><br><span class="line">2	2	2	a</span><br><span class="line">2	2	3	b</span><br><span class="line">3	3	2	a</span><br><span class="line">3	3	3	b</span><br></pre></td></tr></table></figure></p>
<p>观察数据发现：<br>t1表的每一行记录，都与t2表中的任意一条数据关联，反之，t2表的每一行记录，都与t1表中的任意一条数据关联。<br>换句话说：两张表中的数据被交叉连接在了一起。<br>我们把上述<strong>没有任何条件的连接</strong>称为交叉连接，该连接得到的结果与线性代数中<strong>笛卡尔积</strong>一样。</p>
<p>不难发现，使用交叉连接时，任意一张表中的记录多出一行，<code>交叉连接</code>的数量都会增长很多，而且得到的数据没有意义，所以通过交叉连接进行多表查询这种方法，应尽量避免使用。</p>
<h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><p>概念：<br>两张表中同时符合某种条件的数据的组合。</p>
<p>语法：<br><code>SELECT * FROM t1,t2 where t1.t1_id = t2.t2_id</code><br>另一种写法：<br><code>SELECT * FROM t1 inner join t2 on t1.t1_id = t2.t2_id</code><br>inner字段可以省略。</p>
<p>查询结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t1_id	t1_str	t2_id	t2_str</span><br><span class="line">2	2	2	a</span><br><span class="line">3	3	3	b</span><br></pre></td></tr></table></figure></p>
<p>上面的sql语句查询出了t1表与t2表中id号相同的记录，并把两表中id号相同的记录连接在了一起。<br>其中，where或on后边的语句就是”某种条件”，查询结果就是”数据的组合”，这就是内连接，官方建议使用第二种写法。</p>
<p>mysql中，内连接与交叉连接的不同之处就是，内连接比交叉连接有更多的限制条件。经过试验证明(试验代码略)，无论是给内连接(inner join)去掉限制条件(where、on)，<br>还是给交叉连接加上限制条件(where、on)，得到的结果都是一样的。即，双方加条件结果一致，不加条件结果也一致。<br>那么两者可以互相代替么？(待补充)</p>
<p>注意：内连接只是根据条件查询出了两张表中符合条件的数据的组合，如：t1表中t1_id号为1的数据就没有被查出来。<br>刚才我们使用的是<strong>等值连接</strong>，限制条件通过等号相连，<br>那么相应的还有<strong>不等连接</strong>，即条件不是通过等号相连。如：<br><code>SELECT * FROM t1 inner join t2 on t1.t1_id &gt; t2.t2_id</code><br>查询结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t1_id	t1_str	t2_id	t2_str</span><br><span class="line">3	3	2	a</span><br></pre></td></tr></table></figure></p>
<p>应该灵活使用等值or不等值连接。</p>
<p>注意：不能用<strong>交集</strong>的概念去解释内连接，<br>交集：同时属于集合A、B的元素所组成的集合称为交集。<br>但上面结果中，id号为1的数据只属于t1表，t2表中不存在。所以内连接定义为：<br><strong>同时满足条件的数据的组合</strong></p>
<h2 id="外链接：left-join-right-join"><a href="#外链接：left-join-right-join" class="headerlink" title="外链接：left join , right join"></a>外链接：left join , right join</h2><p>外链接分为两种，左外连接和右外链接。</p>
<p>语法：<br><code>SELECT * FROM t1 left outer join t2 on t1.t1_id = t2.t2_id</code></p>
<p>结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t1_id	t1_str	t2_id	t2_str</span><br><span class="line">2	2	2	a</span><br><span class="line">3	3	3	b</span><br><span class="line">1	1</span><br></pre></td></tr></table></figure></p>
<p>通过与内连接的查询结果对比，发现左外连接查出的数据更多一些，多出的一行记录由t1表中的id号为1的记录和一条”空记录”组成。<br>可是t2表中并不存在id号为1的记录啊，为什么不符合连接条件的记录也会出现在查询结果中呢？这就是左外连接的特性。</p>
<p>左外连接不仅会查询出两表中同时符合条件的记录的组合，同时还会将”left outer join”左侧的表中的不符合条件的记录同时展示出来，由于左侧表中的这一部分记录并不符合连接条件，所以这一部分记录使用”空记录”进行连接。<br>换句话说，左外连接”左侧的表”中的所有记录都会被展示出来，左侧表中符合条件的记录将会与右侧表中符合条件的记录相互连接组合，左侧表中不符合条件的记录将会与右侧表中的”空记录”进行连接。<br>上述示例中的t1表就是”left outer join”左侧的表，t2表就是”left outer join”右侧的表，连接条件就是t1id=t2id,虽然t1表中id号为1的记录不满足连接条件，但是仍然会被展示出来，t2表中会使用”空记录”与其进行连接，表示t1表中对应的记录是不满足连接条件的记录。</p>
<p>了解了左外连接，那么右外链接与之相反，右表中所有记录会被展示，右表中符合条件的记录会与左表中符合条件的记录相互连接组合，右表中不符合条件的记录会与左表中的空记录进行连接。<br>那么在此就不对右外链接做过多说明了。</p>
<p>其实，左外连接一般简称为左连接，left outer join 简写为 left join，右外链接简称为右连接。简写为 right join。</p>
<h2 id="联合查询：union-和-union-all"><a href="#联合查询：union-和-union-all" class="headerlink" title="联合查询：union 和 union all"></a>联合查询：union 和 union all</h2><p>语法：<br><code>select column_name(s) from table_name1 union select column_name(s) from table_name2</code></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">t1_id	t1_str</span><br><span class="line">1	1</span><br><span class="line">2	2</span><br><span class="line">3	3</span><br><span class="line">2	a</span><br><span class="line">3	b</span><br></pre></td></tr></table></figure></p>
<p>两张表的结果被集中显示到了一起。union前表的数据在前边显示，union后的后边显示。<br>注：使用union连接两个语句时，两个语句查询出的字段数量必须相同，否则无法使用union进行联合查询。</p>
<p>使用union将两个结果集集中显示时，重复的数据会被合并为一条，如果想显示全部数据，请使用union all，这也是union和union all的唯一区别。</p>
<h2 id="全连接：full-join"><a href="#全连接：full-join" class="headerlink" title="全连接：full join"></a>全连接：full join</h2><p>在sql标准中，有一种被称为”全连接”的多表查询方式，但是mysql并不支持全连接。<br>不过，我们可以变相的实现”全连接”,在mysql中，我们可以使用”left join”、”union”、”right join”的组合实现所谓的”全连接”。</p>
<p>实现方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM t1 left join t2 on t1.t1_id = t2.t2_id</span><br><span class="line">union</span><br><span class="line">SELECT * FROM t1 right outer join t2 on t1.t1_id = t2.t2_id</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t1_id	t1_str	t2_id	t2_str</span><br><span class="line">2	2	2	a</span><br><span class="line">3	3	3	b</span><br><span class="line">1	1</span><br></pre></td></tr></table></figure></p>
<h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select column_name from table_name</span><br><span class="line">where id in (select ...)</span><br></pre></td></tr></table></figure></p>
<p>所谓子查询，就是嵌套在其他查询语句中的查询，子查询的形式有非常多，可以写在：</p>
<ul>
<li><code>select</code>后，作为一个列(column)</li>
<li><code>where</code>后，作为条件<br>等等…</li>
</ul>
<h1 id="一些问题"><a href="#一些问题" class="headerlink" title="一些问题"></a>一些问题</h1><p>数据库字段中时常包含<code>描述</code>字段，意思是作为xxx的描述信息，但是英文单词<code>describe</code>以及<code>desc</code>都是mysql的关键字，谨慎使用，可以使用<code>description</code></p>
<p>至此，mysql基础总结完毕。</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/mysql/" rel="tag"># mysql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/06/sql使用规范/" rel="next" title="MySQL使用规范">
                <i class="fa fa-chevron-left"></i> MySQL使用规范
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/06/mysql技巧/" rel="prev" title="mysql技巧">
                mysql技巧 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">王靖尧</p>
              <div class="site-description motion-element" itemprop="description">一晃而过的时间，都做了些什么</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">99</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">35</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#增删改查"><span class="nav-number">1.</span> <span class="nav-text">增删改查</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据类型"><span class="nav-number">2.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#库相关"><span class="nav-number">3.</span> <span class="nav-text">库相关</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表相关"><span class="nav-number">4.</span> <span class="nav-text">表相关</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#主外键"><span class="nav-number">5.</span> <span class="nav-text">主外键</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#where条件"><span class="nav-number">6.</span> <span class="nav-text">where条件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#where条件参数介绍"><span class="nav-number">6.1.</span> <span class="nav-text">where条件参数介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">6.2.</span> <span class="nav-text">null</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#like-模糊查询"><span class="nav-number">6.3.</span> <span class="nav-text">like(模糊查询)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#not-between-…-and-…"><span class="nav-number">6.4.</span> <span class="nav-text">[not]between … and …</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#not-in"><span class="nav-number">6.5.</span> <span class="nav-text">[not]in</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多条件组合AND-和-OR-操作符"><span class="nav-number">7.</span> <span class="nav-text">多条件组合AND 和 OR 操作符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符函数"><span class="nav-number">8.</span> <span class="nav-text">字符函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#聚合函数"><span class="nav-number">9.</span> <span class="nav-text">聚合函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数值函数"><span class="nav-number">10.</span> <span class="nav-text">数值函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日期时间函数"><span class="nav-number">11.</span> <span class="nav-text">日期时间函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#case-when"><span class="nav-number">12.</span> <span class="nav-text">case when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表连接"><span class="nav-number">13.</span> <span class="nav-text">表连接</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表连接类型"><span class="nav-number">13.1.</span> <span class="nav-text">表连接类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#交叉连接"><span class="nav-number">13.2.</span> <span class="nav-text">交叉连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内连接"><span class="nav-number">13.3.</span> <span class="nav-text">内连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外链接：left-join-right-join"><span class="nav-number">13.4.</span> <span class="nav-text">外链接：left join , right join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#联合查询：union-和-union-all"><span class="nav-number">13.5.</span> <span class="nav-text">联合查询：union 和 union all</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#全连接：full-join"><span class="nav-number">13.6.</span> <span class="nav-text">全连接：full join</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#子查询"><span class="nav-number">14.</span> <span class="nav-text">子查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一些问题"><span class="nav-number">15.</span> <span class="nav-text">一些问题</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王靖尧</span>

  

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>




  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  


  


  



  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function addCount(Counter) {
      var $visitors = $('.leancloud_visitors');
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify({ time: { '__op': 'Increment', 'amount': 1 } }))
            
              .done(function() {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.time + 1);
              })
            
              .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
              })
          } else {
            
              Counter('post', '/classes/Counter', JSON.stringify({ title: title, url: url, time: 1 }))
                .done(function() {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(1);
                })
                .fail(function() {
                  console.log('Failed to create');
                });
            
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'DFKH5YVSHsNt0wDOVISahMVx-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'DFKH5YVSHsNt0wDOVISahMVx-gzGzoHsz',
                'X-LC-Key': 'ILHc2Y6O0p9xfqi3iAWMwnuv',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            addCount(Counter);
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
